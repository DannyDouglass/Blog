
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Mercurial: Create Remote Repositories Using PowerShell - Danny Douglass</title>
  <meta name="author" content="Danny Douglass">

  
  <meta name="description" content="In case you are not familiar with Mercurial (Hg), it is a Distributed Version Control System (DVCS) aimed at simplifying revision control.  The &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://DannyDouglass.com/blog/2010/08/02/mercurial-create-remote-repositories-using-powershell">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="atom.xml" rel="alternate" title="Danny Douglass" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Fjalla+One' rel='stylesheet' type='text/css'>
  

</head>

<body   class="collapse-sidebar sidebar-footer" >
  <header role="banner">
</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:DannyDouglass.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/about">About</a></li>
  <li><a href="/bookshelf">Bookshelf</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
  
    
      <h1 class="entry-title">Mercurial: Create Remote Repositories Using PowerShell</h1>
    
  
    
      <p class="meta">
        








  


<time datetime="2010-08-02T19:12:14-04:00" pubdate data-updated="true">Aug 2<span>nd</span>, 2010</time>
        
      </p>
    
  </header>


<div class="entry-content"><p>In case you are not familiar with Mercurial (Hg), it is a Distributed Version Control System (DVCS) aimed at simplifying revision control.  The purpose of this post is not to introduce Mercurial, but you can read more about Mercurial at the following links to get better acquainted with the software:</p>

<ul>
<li><a href="http://hginit.com/">HgInit</a> | <a href="http://www.joelonsoftware.com/">Joel Spolsky’s</a> detailed introduction to Mercurial</li>
<li><a href="http://hgbook.red-bean.com/read/">Mercurial: The Definitive Guide</a> | A comprehensive guide to using Mercurial</li>
<li><a href="http://code.google.com/p/support/wiki/DVCSAnalysis">Mercurial vs. Git Comparison</a> | Google Code wiki analysis of two DVCS solutions</li>
<li><a href="http://mercurial.selenic.com/wiki/">Official Mercurial Wiki</a> | Selenic’s official Mercurial wiki and guides</li>
</ul>


<p>Now that we are all comfortable with Hg (the chemical symbol for Mercury and nickname for Mercurial), I would like to take present an issue I spent some time working on today.  There are several different <a href="http://mercurial.selenic.com/wiki/PublishingRepositories">publishing mechanisms</a> in Mercurial, but for the setup at my company we decided to simply use http being that our provider is only internally available and protected by several firewalls and other security measures.  We chose this approach over the more popular SSH publishing mechanism being that we are hosting our Mercurial installation on a Windows 2008 R2 server.  Had we installed it on a box running something other than Windows, SSH would have solved the problem I’m about to describe below.  Here’s a quick view of our basic setup:</p>

<p><a href="http://dannydouglass.com/images/2010-08-02-mercurial-create-remote-repositories-using-powershell/MercurialSetupOverHttp_thumb.png"><img src="/images/2010-08-02-mercurial-create-remote-repositories-using-powershell/MercurialSetupOverHttp_thumb.png" alt="Mercurial Setup Over Http" /></a></p>

<p>One limitation when using http as a publishing mechanism is that you <a href="http://ry4an.org/unblog/UnBlog/2009-09-17">cannot create a repository remotely</a>; no if, ands, or buts about it.  Another twist was that our CM (Configuration Management) procedures dictate that our developers are not permitted to RDP into the Mercurial server.  This left us trying to decide how to allow developers to create repositories remotely since our http communication channel does not allow remote repository creation.</p>

<p><a href="http://SquaredRoot.com">Troy Goode</a>, a good friend and colleague, suggested that we leverage PowerShell to solve the problem.  After spending a little bit of time with the Configuration Manager a PowerShell solution was in place. Using the following basic PowerShell command, a remote session was initiated without making the developer an administrator on the machine with RDP access:</p>

<pre><code>ENTER-PSSession your-server-name-or-ipaddress
</code></pre>

<p>I originally encountered an <strong>Access Denied</strong> error, which we discovered was caused by my account not have the appropriate permissions on the Mercurial server to create a remote PowerShell session.  This is pretty easy to remedy and you can read more about it on the <a href="http://technet.microsoft.com/en-us/library/dd819508.aspx">TechNet library page</a>.  Simply execute the following cmdlet <em>on the server</em> to manage the PowerShell remote session security configuration:</p>

<pre><code>set-pssessionConfiguration -name Microsoft.PowerShell -showSecurityDescriptorUI
</code></pre>

<p>The last change is to set the appropriate directory permissions on the remote server to the location where developers are permitted to create repositories. That should be straightforward enough without going into any examples since repository architectures can differ drastically.</p>

<p>It can’t be that easy, can it? Well, good news – it is that simple!  With those changes you should be able to remote manage (create and delete) your Mercurial (Hg) repositories via PowerShell.  Hopefully this helps you save some time in your setup of Mercurial – a very awesome, and my current favorite, Version Control System.</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">DannyDouglass</span></span>

      








  


<time datetime="2010-08-02T19:12:14-04:00" pubdate data-updated="true">Aug 2<span>nd</span>, 2010</time>
      


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://DannyDouglass.com/blog/2010/08/02/mercurial-create-remote-repositories-using-powershell/" data-via="DannyDouglass" data-counturl="http://DannyDouglass.com/blog/2010/08/02/mercurial-create-remote-repositories-using-powershell/" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium"></div>
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false"></div>
  
</div>

    
    <p class="meta">
      
      
        <a class="basic-alignment right" href="/blog/2010/08/09/whats-new-in-the-dotnet-world/" title="Next Post: What's Nu in the .NET World?">What's Nu in the .NET World? &raquo;</a>
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2011/02/24/create-a-recursive-ruby-script-to-replace-file-and-directory-names-and-file-contents/">How to: Create a Recursive Ruby Script to replace File/Directory Names and File Contents</a>
      </li>
    
      <li class="post">
        <a href="/blog/2010/11/06/simplify-using-xml-data-with-automapper-and-linqtoxml/">Simplify Using Xml Data with AutoMapper and Linq-to-Xml</a>
      </li>
    
      <li class="post">
        <a href="/blog/2010/10/27/console2powershellposhhg/">A Better Hg Command Line Interface: Console2 + PowerShell + Posh-Hg</a>
      </li>
    
      <li class="post">
        <a href="/blog/2010/10/06/nupack-vs-nuproj-vs-openwrap/">NuPack vs. Nu (Nubular) vs. OpenWrap</a>
      </li>
    
      <li class="post">
        <a href="/blog/2010/10/01/dcaltnet-package-management-presentation/">Presentation Materials from ALT.NET Presentation on Package Management</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/DannyDuglass">@DannyDuglass</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'DannyDuglass',
            count: 5,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>



<section class="googleplus">
  <h1>
    <a href="https://plus.google.com/ddouglass@gmail.com?rel=author">
      <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
      Google+
    </a>
  </h1>
</section>



  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Danny Douglass <br/>
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a>, customized with <a href="https://github.com/mjhea0/whiterspace">whiterspace</a>.</span>
</p>

</footer>
  



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
